import streamlit as st
import pandas as pd
import numpy as np

# --- 1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–µ—Ä–≤—ã–º) ---
st.set_page_config(
    page_title="–ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –î—ç—à–±–æ—Ä–¥",
    layout="wide"  # –î–µ–ª–∞–µ–º –º–∞–∫–µ—Ç —à–∏—Ä–æ–∫–∏–º –¥–ª—è –ª—É—á—à–µ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
)

# --- 2. –£—Å–ª–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ-–∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã (–§–∏–∫—Ç–∏–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ) ---

DATA = {
    '–ú–µ—Å—è—Ü': ['–Ø–Ω–≤', '–§–µ–≤', '–ú–∞—Ä', '–ê–ø—Ä', '–ú–∞–π', '–ò—é–Ω'],
    '–ü—Ä–æ–¥–∞–∂–∏ ($)': [1500, 2200, 1800, 3100, 2500, 3800],
    '–ö–ª–∏–µ–Ω—Ç—ã': [15, 25, 20, 35, 30, 42]
}
df = pd.DataFrame(DATA)

# --- 3. –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –≤–≤–æ–¥ (–ò–º–∏—Ç–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏) ---

st.title("üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ü—Ä–æ–¥–∞–∂ (–ü—Ä–æ—Ç–æ—Ç–∏–ø)")
st.subheader("–û–±–∑–æ—Ä –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π")

# –ò–º–∏—Ç–∞—Ü–∏—è –ø—Ä–æ—Å—Ç–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞ (–Ω–æ –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö)
time_frame = st.selectbox(
    "–í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–∏–æ–¥:",
    ['–ü–æ—Å–ª–µ–¥–Ω–∏–µ 6 –º–µ—Å—è—Ü–µ–≤', '–ü–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–µ—Å—è—Ü–∞', '–í–µ—Å—å –≥–æ–¥'],
    index=0
)

st.info(f"–û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –∑–∞: **{time_frame}**")
st.markdown("---")


# --- 4. –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (–ö–∞—Ä—Ç–æ—á–∫–∏ KPI) ---

# –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —É—Å–ª–æ–≤–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫
total_sales = df['–ü—Ä–æ–¥–∞–∂–∏ ($)'].sum()
avg_sales = df['–ü—Ä–æ–¥–∞–∂–∏ ($)'].mean()
total_clients = df['–ö–ª–∏–µ–Ω—Ç—ã'].sum()

# –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –º–∞–∫–µ—Ç–∞ –Ω–∞ 3 –∫–æ–ª–æ–Ω–∫–∏
col1, col2, col3 = st.columns(3)

with col1:
    st.metric(label="–û–±—â–∏–π –¥–æ—Ö–æ–¥", value=f"${total_sales:,}", delta="15%")

with col2:
    st.metric(label="–°—Ä–µ–¥–Ω–∏–π —á–µ–∫", value=f"${avg_sales:,.2f}", delta="-2.5%")

with col3:
    st.metric(label="–ù–æ–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤", value=f"{total_clients}", delta="7")

st.markdown("---")

# --- 5. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∏ –¢–∞–±–ª–∏—Ü–∞ ---

st.header("–î–∏–Ω–∞–º–∏–∫–∞ –∏ –¥–µ—Ç–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ")

# 1. –ì—Ä–∞—Ñ–∏–∫ (–î–∏–Ω–∞–º–∏–∫–∞ –ø—Ä–æ–¥–∞–∂)
st.line_chart(df.set_index('–ú–µ—Å—è—Ü')['–ü—Ä–æ–¥–∞–∂–∏ ($)'])

# 2. –¢–∞–±–ª–∏—Ü–∞ —Å –¥–∞–Ω–Ω—ã–º–∏
st.subheader("–°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞")
st.dataframe(df, use_container_width=True)

# 3. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –≤–∏–¥–∂–µ—Ç (–ü—Ä–æ—Å—Ç–æ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏)
st.sidebar.header("–ü–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫")
st.sidebar.slider("–£—Ä–æ–≤–µ–Ω—å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏", 0, 100, 50)
